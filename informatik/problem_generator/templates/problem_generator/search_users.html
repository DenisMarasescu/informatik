{% extends "problem_generator/base.html" %}

{% block content %}
<h1>Search Users</h1>

<!-- Search Form -->
<form method="get" action="{% url 'search_users' %}">
    <input type="text" name="query" placeholder="Search for users..." value="{{ request.GET.query }}">
    <button type="submit">Search</button>
</form>

<!-- Search Results -->
<ul>
    {% if users %}
        {% for user in users %}
        <li>
            {{ user.username }} ({{ user.email }})
            {% if user != request.user %}
            <form method="post" action="{% url 'send_request' user.id %}">
                {% csrf_token %}
                <button type="submit">Send Friend Request</button>
            </form>
            {% endif %}
        </li>
        {% endfor %}
    {% else %}
        <li>No users found.</li>
    {% endif %}
</ul>

{% endblock %}
